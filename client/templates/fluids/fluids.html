<template name="fluids">
  <div class="page">
    <nav>
      <div class="nav-group">
        <a href="#" class="js-menu nav-item"><span class="icon-list-unordered"></span></a>
      </div>
    </nav>


    <ul class="list-group" style="width:400px;position:relative;">
      {{#each fluids}}
        <li class="list-group-item" ><span class="update-fluid" style="width:100%" data-toggle="modal" data-target="#fluidformmodal">{{fluid_type}} {{fluid_provider}}</span>
        {{# quickRemoveButton collection=fluidCollection _id=this._id beforeRemove=beforeRemove style="position:absolute;right:10px;top:10px;border:none !important;background-color:white;color:red;" class="btn btn-xs btn-danger"}}
        <span class="glyphicon glyphicon-trash" ></span>
        {{/quickRemoveButton}}</li>
      {{/each}}
    </ul>

    <div class="content-scrollable">
      <div class="wrapper-auth">

        <button class="btn btn-success addFluidBtn" style="border:none !important;background-color:white;color:green;" data-toggle="modal" data-target="#fluidformmodal"><span class="glyphicon glyphicon-plus"></span></button>
        <div class="modal fade" id="fluidformmodal">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
              <h4 class="modal-title">{{getFormTitle}}</h4>
            </div>
          <div class="modal-body">

            {{#autoForm schema=fluidSchema collection=fluidCollection  doc=getFluid id="fluidAutoForm"}}
              {{> afQuickField name='fluid_type'}}
              {{> afQuickField name='fluid_provider'}}
              {{> afQuickField name='global_evolution_index'}}
              {{> afQuickField name='yearly_values' template="inline"}}
              {{> afQuickField name='estate_id' value=getEstate label=false type='hidden'}}
              <button type="submit" style="border:none !important;background-color:white;color:green;" class="btn btn-primary">Ok</button>
            {{/autoForm}}
          </div>
        </div>
      </div>
    </div>

  </div>


  <!-- Fluid providers -->
    <h4>Fluid types</h4>
    <ul class="list-group" style="width:400px;position:relative;">
      {{#each fluidTypesForCurrentEstate}}
        {{#each labels}}
            <li class="list-group-item" ><span class="update-fluidType" style="width:100%" data-toggle="modal" data-target="#fluidformmodal">{{_ this.valueOf}}</span>
            {{# quickRemoveButton collection=fluidCollection _id=this._id beforeRemove=beforeRemove style="position:absolute;right:10px;top:10px;border:none !important;background-color:white;color:red;" class="btn btn-xs btn-danger"}}
            <span class="glyphicon glyphicon-trash" ></span>
            {{/quickRemoveButton}}</li>
        {{/each}}
      {{/each}}
    </ul>

</div>
</template>
